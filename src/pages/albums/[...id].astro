---
import {getCollection} from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Album from '../../components/Album.astro';
import AlbumGrid from '../../components/AlbumGrid.astro';

export async function getStaticPaths() {
	const albums = await getCollection('albums');
	return albums.map((album) => ({
		params: {id: album.id},
		props: {album}
	}));
}

const {album} = Astro.props;
const {title, cover} = album.data;
---

<Layout
	theme="dark"
	{title}
	{cover}
	breadcrumbs={[{title: 'favorite albums', url: '/albums'}]}
>
	<Album {album} />
	<AlbumGrid />
</Layout>
